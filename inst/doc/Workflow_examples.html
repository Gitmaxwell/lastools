<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Matthew Dick &amp; Kane Maxwell" />

<meta name="date" content="2018-12-12" />

<title>Workflow_examples</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">Workflow_examples</h1>
<h4 class="author"><em>Matthew Dick &amp; Kane Maxwell</em></h4>
<h4 class="date"><em>2018-12-12</em></h4>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#workflow">Workflow</a><ul>
<li><a href="#compile-las-files">Compile LAS files</a></li>
<li><a href="#read-las-files-to-r">Read LAS file/s to R</a></li>
<li><a href="#las-object">LAS Object</a><ul>
<li><a href="#well-section">Well Section</a></li>
<li><a href="#curve-section">Curve section</a></li>
<li><a href="#parameter-section">Parameter section</a></li>
<li><a href="#log-section">Log section</a></li>
</ul></li>
<li><a href="#convertstandardize-las">Convert/standardize LAS</a></li>
</ul></li>
<li><a href="#references">References</a></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The following outlines a typical workflow for analyzing and manipulating data from a LAS file using lastools functionality, and expands on function documentation by way of example/s.</p>
</div>
<div id="workflow" class="section level1">
<h1>Workflow</h1>
<p>The typical workflow for analyzing and manipulating data from a LAS file typically comprises of:</p>
<ul>
<li><p>Compile LAS files</p></li>
<li><p>Read LAS file/s to R</p></li>
<li><p>Convert/standardize LAS</p></li>
<li><p>Analyse LAS data</p></li>
<li><p>Re-write LAS object to LAS file or write LAS object data to tabular store</p></li>
</ul>
<div id="compile-las-files" class="section level2">
<h2>Compile LAS files</h2>
<p>It is common for a company to have many hundreds or thousands of LAS files across a disparate file structure. However, it may be more convenient (in order to perform analytics or for loading/writing LAS) to have LAS files stored in a single file location.</p>
<p>As a first step the below examples how you might compile (copy) all “.las” files from a target directory to a nominated locaiton by creating a quick ‘compile’ function</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">#source directory</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">s &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C:/&quot;</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co"># create a target directory on the file system called &quot;compiled_las&quot;</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#target directory</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">t &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C:/compiled_las&quot;</span>)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">las_compile &lt;-<span class="st">  </span><span class="cf">function</span> (s,t)</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">{</a>
<a class="sourceLine" id="cb1-9" data-line-number="9"></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">  list.of.files &lt;-<span class="st"> </span><span class="kw">list.files</span>(s, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.las$&quot;</span>,<span class="dt">recursive =</span> <span class="ot">TRUE</span>, <span class="dt">full.names =</span> T)</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">  <span class="kw">file.copy</span>(list.of.files,t)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb1-13" data-line-number="13"></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#compile las takes .las files from the source directory and moves to the target directory</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="kw">las_compile</span>(s,t)</a></code></pre></div>
</div>
<div id="read-las-files-to-r" class="section level2">
<h2>Read LAS file/s to R</h2>
<p>‘lastools’ provides two ways to load las data. The first is to load a LAS file as a LAS ‘Object’ (using lastools::read_las). The second is to load LAS curve data to an R data.table by using lastools::read_las_data_df. The latter is really just a wrapper for read_las, however is convenient for rapidly compiling multiple LAS data sets to a flat file structure.</p>
<p>Note that the majority of functions in lastools (convert, plot etc.) expect a LAS ‘object’, created from lastools::read_las.</p>
<p>Also note that the ability to compile the curve data of &gt;10 LAS files direct to flat file format (R data.table) is a unique feature as compared to other (freely available) packages/software.</p>
<p>To load a single LAS file to a LAS object is rudimentary. The function lastools::read_las simply expects a directory path to the LAS file of interest.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">lastools<span class="op">::</span><span class="kw">read_las</span>(<span class="st">&quot;filepath&quot;</span>)</a></code></pre></div>
<p>Note that specified NULL values in the LAS file (usually some numeric value) are set to ‘NA’ by default; to keep NULL values simply use ‘replace_null =FALSE’.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">lastools<span class="op">::</span><span class="kw">read_las</span>(<span class="st">&quot;filepath&quot;</span>,<span class="dt">replace_null =</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p>Loading LAS file LOG data to data.table is also rudimentary and supports bulk loading at a directory level (no need to nominate an exact file-path to a LAS file). This function will compile all LAS log data (.las files) into a long format data table by well/file. Due to the potential variety in NULL numeric values from differing LAS files, all NULL values are set to R NA value</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">lastools<span class="op">::</span><span class="kw">read_las_data_df</span>(<span class="st">&quot;directory&quot;</span>)</a></code></pre></div>
</div>
<div id="las-object" class="section level2">
<h2>LAS Object</h2>
<p>A lastools ‘LAS object’ is an ‘R’ representation of a LAS file and is returned when using the lastools::read_las function. The representation comprises of a list object with list sections WELL, CURVE, PARAMETER and LOG are data.frames while OTHER is a string with line breaks. VERSION is a numeric (1.2 or 2.0).</p>
<p>Each section is representative of the most pertinent sections of a LAS file. Below is an example of each section using the example ‘LAS object’ data provided with lastools (accessible as lastools::example_las_obj)</p>
<div id="well-section" class="section level3">
<h3>Well Section</h3>
<p>Contains detail on the borehole (well) such as the well identifier, service company, locality details, start and stop depths etc.</p>
<table>
<caption>lastools::example_las_obj$WELL</caption>
<thead>
<tr class="header">
<th align="center">MNEM</th>
<th align="center">UNIT</th>
<th align="center">VALUE</th>
<th align="center">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">STRT</td>
<td align="center">F</td>
<td align="center">10180.0000</td>
<td align="center">START DEPTH</td>
</tr>
<tr class="even">
<td align="center">STOP</td>
<td align="center">F</td>
<td align="center">10414.0000</td>
<td align="center">STOP DEPTH</td>
</tr>
<tr class="odd">
<td align="center">STEP</td>
<td align="center">F</td>
<td align="center">1.0000</td>
<td align="center">STEP</td>
</tr>
<tr class="even">
<td align="center">NULL</td>
<td align="center"></td>
<td align="center">-999.25</td>
<td align="center">NULL VALUE</td>
</tr>
<tr class="odd">
<td align="center">COMP</td>
<td align="center"></td>
<td align="center">Cramer Oil</td>
<td align="center">COMPANY</td>
</tr>
<tr class="even">
<td align="center">WELL</td>
<td align="center"></td>
<td align="center">#36-16 State</td>
<td align="center">WELL</td>
</tr>
<tr class="odd">
<td align="center">LOC</td>
<td align="center"></td>
<td align="center">SE SE 36-47N-71W</td>
<td align="center">LOCATION</td>
</tr>
<tr class="even">
<td align="center">CNTY</td>
<td align="center"></td>
<td align="center">Campbell</td>
<td align="center">COUNTY</td>
</tr>
<tr class="odd">
<td align="center">FLD</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">FIELD</td>
</tr>
<tr class="even">
<td align="center">STAT</td>
<td align="center"></td>
<td align="center">Wyoming</td>
<td align="center">STATE</td>
</tr>
<tr class="odd">
<td align="center">CTRY</td>
<td align="center"></td>
<td align="center">U.S.A.</td>
<td align="center">COUNTRY</td>
</tr>
<tr class="even">
<td align="center">DATE</td>
<td align="center"></td>
<td align="center">11/91</td>
<td align="center">COMPLETION DATE (MM/YY)</td>
</tr>
<tr class="odd">
<td align="center">API</td>
<td align="center"></td>
<td align="center">49-005-30258-0000</td>
<td align="center">API NUMBER</td>
</tr>
<tr class="even">
<td align="center">SRVC</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">SERVICE COMPANY</td>
</tr>
</tbody>
</table>
</div>
<div id="curve-section" class="section level3">
<h3>Curve section</h3>
<p>Contains the detail (API codes and long descriptions) of the log data headings</p>
<table>
<caption>lastools::example_las_obj$CURVE</caption>
<thead>
<tr class="header">
<th align="center">MNEM</th>
<th align="center">UNIT</th>
<th align="center">API.CODE</th>
<th align="center">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">DEPT</td>
<td align="center">F</td>
<td align="center"></td>
<td align="center">1 DEPTH</td>
</tr>
<tr class="even">
<td align="center">DT</td>
<td align="center">US/F</td>
<td align="center"></td>
<td align="center">2 SONIC DELTA-T</td>
</tr>
<tr class="odd">
<td align="center">RESD</td>
<td align="center">OHMM</td>
<td align="center"></td>
<td align="center">3 DEEP RESISTIVITY</td>
</tr>
<tr class="even">
<td align="center">SP</td>
<td align="center">MV</td>
<td align="center"></td>
<td align="center">4 SP CURVE</td>
</tr>
<tr class="odd">
<td align="center">GR</td>
<td align="center">GAPI</td>
<td align="center"></td>
<td align="center">5 GAMMA RAY</td>
</tr>
</tbody>
</table>
</div>
<div id="parameter-section" class="section level3">
<h3>Parameter section</h3>
<p>Contains additional details at the discretion of the service company or the requesting company</p>
<table>
<caption>lastools::example_las_obj$PARAM</caption>
<thead>
<tr class="header">
<th align="center">MNEM</th>
<th align="center">UNIT</th>
<th align="center">VALUE</th>
<th align="center">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">BHT</td>
<td align="center">DEGF</td>
<td align="center">194.0000</td>
<td align="center">BOTTOM HOLE TEMPERATURE</td>
</tr>
<tr class="even">
<td align="center">RMF</td>
<td align="center">OHMM</td>
<td align="center">0.4410</td>
<td align="center">MUD FILTRATE RESISTIVITY</td>
</tr>
<tr class="odd">
<td align="center">RMFT</td>
<td align="center">DEGF</td>
<td align="center">68.0000</td>
<td align="center">MEASURE TEMPERATURE OF RMF</td>
</tr>
<tr class="even">
<td align="center">EKB</td>
<td align="center">F</td>
<td align="center">4642.0000</td>
<td align="center">ELEVATION KELLY BUSHING</td>
</tr>
<tr class="odd">
<td align="center">SECT</td>
<td align="center"></td>
<td align="center">36</td>
<td align="center">SECTION</td>
</tr>
<tr class="even">
<td align="center">TOWN</td>
<td align="center"></td>
<td align="center">47N</td>
<td align="center">TOWNSHIP</td>
</tr>
<tr class="odd">
<td align="center">RANG</td>
<td align="center"></td>
<td align="center">71W</td>
<td align="center">RANGE</td>
</tr>
</tbody>
</table>
</div>
<div id="log-section" class="section level3">
<h3>Log section</h3>
<p>Contains the actual response data in flat file (wide) format. Column names are typically codes which are fully described in the Curve section</p>
<table>
<caption>lastools::example_las_obj$LOG</caption>
<thead>
<tr class="header">
<th align="center">DEPT</th>
<th align="center">DT</th>
<th align="center">RESD</th>
<th align="center">SP</th>
<th align="center">GR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">10181</td>
<td align="center">59.9</td>
<td align="center">21.0</td>
<td align="center">49.0</td>
<td align="center">114</td>
</tr>
<tr class="even">
<td align="center">10182</td>
<td align="center">60.5</td>
<td align="center">19.7</td>
<td align="center">53.0</td>
<td align="center">127</td>
</tr>
<tr class="odd">
<td align="center">10183</td>
<td align="center">63.5</td>
<td align="center">18.9</td>
<td align="center">55.6</td>
<td align="center">150</td>
</tr>
<tr class="even">
<td align="center">10184</td>
<td align="center">64.5</td>
<td align="center">18.2</td>
<td align="center">58.4</td>
<td align="center">155</td>
</tr>
<tr class="odd">
<td align="center">10185</td>
<td align="center">64.6</td>
<td align="center">18.0</td>
<td align="center">62.5</td>
<td align="center">140</td>
</tr>
<tr class="even">
<td align="center">10186</td>
<td align="center">61.5</td>
<td align="center">18.0</td>
<td align="center">64.7</td>
<td align="center">121</td>
</tr>
<tr class="odd">
<td align="center">10187</td>
<td align="center">59.2</td>
<td align="center">21.0</td>
<td align="center">66.9</td>
<td align="center">106</td>
</tr>
<tr class="even">
<td align="center">10188</td>
<td align="center">55.9</td>
<td align="center">29.0</td>
<td align="center">69.3</td>
<td align="center">62</td>
</tr>
<tr class="odd">
<td align="center">10189</td>
<td align="center">52.1</td>
<td align="center">53.0</td>
<td align="center">71.3</td>
<td align="center">25</td>
</tr>
<tr class="even">
<td align="center">10190</td>
<td align="center">49.1</td>
<td align="center">390.0</td>
<td align="center">73.7</td>
<td align="center">9</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="convertstandardize-las" class="section level2">
<h2>Convert/standardize LAS</h2>
<p>Once a LAS file is loaded to memory as a LAS object, a number of convinience functions are available to modify the LAS version and well information.</p>
<p>These include:</p>
<ul>
<li><p>las_convert_v2()</p></li>
<li><p>las_descending()</p></li>
<li><p>las_remove_uwi()</p></li>
<li><p>las_set_start_depth()</p></li>
<li><p>las_trim_well_id()</p></li>
</ul>
<p>As an example, a common issue with LAS files from different vendors is inconsistant white space in the well id field and incosistancy in the order of depth increments (acending vs decending). In this case it might</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">library</span>(lastools)</a></code></pre></div>
</div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
